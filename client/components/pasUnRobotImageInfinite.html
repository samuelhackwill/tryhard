<template name="pasUnRobotImageInfinite">
  <div id="pasUnRobotInfinite" class="fixed left-1/2 top-1/2 w-[90vw] -translate-x-1/2 -translate-y-1/2 shadow-lg bg-white p-4 rounded-sm transition-opacity duration-1000 {{#if isRendered}}opacity-100{{else}}opacity-0 pointer-events-none{{/if}}">
    <p class="bg-blue-500 p-4 text-white text-3xl mb-4 h-[110px]">
      <span class="block max-w-[80%]">{{captchaPrompt}}</span> 
      <span id="score" class="transition-opacity opacity-0 right-8 top-8 absolute">grains : <span id="total" class="mono">0</span><span class="mono">/{{getTarget}}</span></span>
      <span id="precision" class="transition-opacity opacity-0 right-8 top-16 absolute">puret√© : <span id="precisionScore" class="mono">100</span><span>%</span></span>
      <span id="hiddenBasmati" class="transition-opacity opacity-0 absolute">basmati<span class="mono">0</span></span>
      <span id="hiddenArborio" class="transition-opacity opacity-0 absolute">arborio<span class="mono">0</span></span>
    </p>

    <div class="grid gap-1 overflow-hidden"
         style="grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); grid-auto-rows: 70px;">
      {{#each imageKeys}}
        {{#with getImage this}}
          <div id="captcha-image-{{index}}"
               class="relative cursor-pointer captcha-image group transition-transform duration-200 ease-out {{#if isSelected}}scale-90{{/if}}"
               data-index="{{index}}"
               data-cultivar="{{cultivar}}"
               >
            <div class="w-full h-full overflow-hidden">
              <img src="{{src}}"
                   class="w-full h-full object-cover rounded border transition-opacity duration-300 {{#if isSelected}}border-blue-500{{else}}border-gray-300{{/if}}" />
              {{#if isSelected}}
                <div class="absolute inset-0 flex items-center justify-center bg-blue-500 bg-opacity-40">
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
              {{/if}}
            </div>
          </div>
        {{/with}}
      {{/each}}
    </div>
  </div>
</template>
